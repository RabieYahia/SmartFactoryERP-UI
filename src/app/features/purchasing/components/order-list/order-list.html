<div class="container-fluid p-4">
  <div class="d-flex align-items-center justify-content-between mb-4">
    <div>
      <h2 class="h3 mb-0">ðŸ“‘ Purchase Orders</h2>
      <p class="text-muted small">Manage procurement orders and deliveries.</p>
    </div>
    <button class="btn btn-primary" routerLink="/purchasing/create-order">
      <i class="bi bi-cart-plus me-2"></i> New Order
    </button>
  </div>

  @if (isLoading()) {
    <div class="alert alert-info d-flex align-items-center" role="alert">
      <div class="spinner-border spinner-border-sm me-2"></div>
      <span>Loading orders...</span>
    </div>
  }
  @else {
    <div class="card border-0 shadow-sm">
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
          <thead class="bg-light">
            <tr>
              <th class="ps-3 py-3">PO #</th>
              <th class="py-3">Supplier</th>
              <th class="py-3">Order Date</th>
              <th class="py-3">Total</th>
              <th class="py-3">Status</th>
              <th class="text-end pe-3 py-3">Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (order of orders(); track order.id) {
              <tr>
                <td class="ps-3">
                  <a [routerLink]="['/purchasing/orders', order.id]" class="text-decoration-none fw-bold text-primary">
                    {{ order.poNumber }}
                  </a>
                </td>
                <td>{{ order.supplierName }}</td>
                <td>{{ order.orderDate | date:'mediumDate' }}</td>
                <td class="fw-bold">{{ order.totalAmount | currency }}</td>
                <td>
                  <span class="badge rounded-pill px-3"
                        [class.bg-warning]="order.status === 'Draft'"
                        [class.bg-success]="order.status === 'Confirmed'"
                        [class.bg-info]="order.status === 'Received'"
                        [class.bg-secondary]="order.status === 'Cancelled'">
                    {{ order.status }}
                  </span>
                </td>
                <td class="text-end pe-3">
                  <div class="d-flex justify-content-end gap-2">

                    <button class="btn btn-sm btn-outline-secondary" [routerLink]="['/purchasing/orders', order.id]" title="View Details">
                      <i class="bi bi-eye-fill me-1"></i> View
                    </button>

                    @if (order.status === 'Confirmed') {
                      <button class="btn btn-sm btn-primary" [routerLink]="['/purchasing/receive', order.id]" title="Receive Goods">
                        <i class="bi bi-box-seam me-1"></i> Receive
                      </button>
                    }
                  </div>
                </td>
              </tr>
            }
            @empty {
              <tr>
                <td colspan="6" class="text-center py-5 text-muted">
                  <i class="bi bi-inbox fs-1 d-block mb-2"></i>
                  No purchase orders found.
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  }
</div>
