<div class="container">
  <div class="header-actions">
    <h2>ğŸ“‘ Purchase Orders</h2>
    <button class="btn-primary" routerLink="/purchasing/create-order">ğŸ›’ New Order</button>
  </div>

  @if (isLoading()) {
    <div class="loading-spinner">â³ Loading orders...</div>
  } 
  @else {
    <table class="modern-table">
      <thead>
        <tr>
          <th>PO #</th>
          <th>Supplier</th>
          <th>Date</th>
          <th>Total</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (order of orders(); track order.id) {
          <tr>
            <td><strong>{{ order.poNumber }}</strong></td>
            <td>{{ order.supplierName }}</td>
            <td>{{ order.orderDate | date:'mediumDate' }}</td>
            <td style="font-weight: bold;">{{ order.totalAmount | currency }}</td>
            <td>
              <span class="badge" 
                    [class.draft]="order.status === 'Draft'" 
                    [class.confirmed]="order.status === 'Confirmed'">
                {{ order.status }}
              </span>
            </td>
            <td>
              @if (order.status === 'Draft') {
                <button class="btn-confirm" (click)="onConfirm(order.id)" title="Confirm & Send">
                  âœ… Confirm
                </button>
              }
              @else if (order.status === 'Confirmed') {
                <span class="text-muted">Waiting Receipt...</span>
              }
            </td>
            <td>
  @if (order.status === 'Confirmed') {
    <button class="btn-receive" [routerLink]="['/purchasing/receive', order.id]" title="Receive Goods">
      ğŸ“¥ Receive
    </button>
  }
</td>
          </tr>
        } 
        @empty {
          <tr>
            <td colspan="6" style="text-align: center;">No orders found.</td>
          </tr>
        }
      </tbody>
    </table>
  }
</div>