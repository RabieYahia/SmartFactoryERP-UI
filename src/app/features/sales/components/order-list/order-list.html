<div class="container">
  <div class="header-actions">
    <h2>ğŸ“‘ Sales Orders</h2>
    <button class="btn-primary" routerLink="/sales/create-order">ğŸ›’ New Sale</button>
  </div>

  @if (isLoading()) {
    <div class="loading-spinner">â³ Loading sales...</div>
  } 
  @else {
    <table class="modern-table">
      <thead>
        <tr>
          <th>Order #</th>
          <th>Customer</th>
          <th>Date</th>
          <th>Total</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (order of orders(); track order.id) {
          <tr>
            <td><strong>{{ order.orderNumber }}</strong></td>
            <td>{{ order.customerName }}</td>
            <td>{{ order.orderDate | date:'mediumDate' }}</td>
            <td style="font-weight: bold; color: green;">{{ order.totalAmount | currency }}</td>
            <td>
              <span class="badge" 
                    [class.draft]="order.status === 'Draft'" 
                    [class.confirmed]="order.status === 'Confirmed'"
                    [class.invoiced]="order.status === 'Invoiced'">
                {{ order.status }}
              </span>
            </td>
            <td>
              @if (order.status === 'Draft') {
                <button class="btn-confirm" (click)="onConfirm(order.id)" title="Confirm & Reserve Stock">
                  âœ… Confirm
                </button>
              }

              @if (order.status === 'Confirmed' || order.status === 'Invoiced') {
                <button class="btn-pdf" (click)="downloadPdf(order.id)" title="Download Invoice">
                  ğŸ–¨ï¸ PDF
                </button>
              }
            </td>
          </tr>
        } 
        
        @empty {
          <tr>
            <td colspan="6" style="text-align: center;">No sales orders found.</td>
          </tr>
        }
      </tbody>
    </table>
  }
</div>