<div class="container">
  
  <div class="header-actions">
    <h2>ğŸ“¦ Inventory Materials</h2>
    <button class="btn-primary" routerLink="/inventory/create">â• Add Material</button>
  </div>

  <div class="search-bar">
    <input 
      type="text" 
      placeholder="ğŸ” Search by name or code..." 
      (input)="onSearch($event)"
      class="search-input"
    >
    <span class="count-badge">
      Found: {{ filteredMaterials().length }}
    </span>
    
  </div>

  @if (isLoading()) {
    <div class="loading-spinner">â³ Loading data...</div>
  } 
  @else {
    
    <table class="modern-table">
      <thead>
        <tr>
          <th>Code</th>
          <th>Name</th>
          <th>Price</th>
          <th>Stock Level</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (item of filteredMaterials(); track item.id) {
          <tr>
            <td><strong>{{ item.materialCode }}</strong></td>
            <td>{{ item.materialName }}</td>
            <td>{{ item.unitPrice | currency }}</td>
            
            <td [style.color]="item.currentStockLevel < 10 ? 'red' : 'green'" 
                style="font-weight: bold;">
              {{ item.currentStockLevel }}
            </td>

            <td>
              <button class="btn-icon edit" [routerLink]="['/inventory/edit', item.id]" title="Edit">
                âœï¸
              </button>

              <button class="btn-icon delete" (click)="onDelete(item.id)" title="Delete">
                ğŸ—‘ï¸
              </button>

              <button class="btn-icon ai" (click)="onPredict(item.id, item.materialName)" title="AI Forecast">
                ğŸ”®
              </button>
            </td>
          </tr>
        } 
        @empty {
          <tr>
            <td colspan="5" style="text-align: center; padding: 20px;">
              ğŸš« No materials match your search "{{ searchQuery() }}"
            </td>
          </tr>
        }
      </tbody>
    </table>

  }
</div>